---
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero.astro';
import Content from '~/components/widgets/Content.astro';
import ServiceCards from '~/components/widgets/ServiceCards.astro';
import { getPermalink } from '~/utils/permalinks';
import profileImage from '~/assets/images/profile.jpg';

const metadata = {
  title: 'Personal Homepage Demo',
};
---

<Layout metadata={metadata}>
  <div>
    <section id="home" class="min-h-screen flex items-center justify-center">
      <Hero
        title="<span class='text-large'>Embedded software</span> that <span class='highlight-primary'>talks to hardware</span>, <span class='highlight-secondary'>runs on time</span>, and <span class='highlight-accent'>scales</span> with your process."
        tagline="<span class='highlight'>Startup</span>, <span class='highlight'>SME</span>, or <span class='highlight'>industrial group</span> : if you need extra embedded expertise, I'm here to help."
        actions={[{ variant: 'primary', text: 'Contact', href: getPermalink('/contact#form') }]}
      />
    </section>

    <section id="services" class="min-h-screen flex items-center justify-center">
      <div class="w-full max-w-7xl mx-auto px-4">
        <ServiceCards />

        <div class="text-center mb-12 mt-16">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">Why choose my services?</h2>
          <p class="text-xl text-muted">Concrete advantages for your embedded project</p>
        </div>

        <div class="grid gap-8 gap-x-12 sm:gap-y-8 lg:grid-cols-3 sm:grid-cols-2 mb-16">
          <div
            class="relative flex flex-col intersect-once intersect-quarter intercept-no-queue motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade rounded-lg shadow-[0_4px_30px_rgba(0,0,0,0.1)] backdrop-blur border border-[#ffffff29] bg-white p-6 hover:shadow-[0_8px_40px_rgba(0,173,181,0.15)] transition-all duration-300 hover:-translate-y-1"
          >
            <div class="text-xl font-bold mb-2">Focused expertise + Fast ramp-up</div>
            <p class="text-muted mt-2">100% firmware & hardware integration with zero distractions. Productive from day one â€” no heavy onboarding or learning curve.</p>
          </div>

          <div
            class="relative flex flex-col intersect-once intersect-quarter intercept-no-queue motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade rounded-lg shadow-[0_4px_30px_rgba(0,0,0,0.1)] backdrop-blur border border-[#ffffff29] bg-white p-6 hover:shadow-[0_8px_40px_rgba(0,173,181,0.15)] transition-all duration-300 hover:-translate-y-1"
          >
            <div class="text-xl font-bold mb-2">Cost control & Fair pricing</div>
            <p class="text-muted mt-2">Targeted expertise without unnecessary overhead. Short-term, fixed-price, or critical phase support â€” whatever fits your budget best.</p>
          </div>

          <div
            class="relative flex flex-col intersect-once intersect-quarter intercept-no-queue motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade rounded-lg shadow-[0_4px_30px_rgba(0,0,0,0.1)] backdrop-blur border border-[#ffffff29] bg-white p-6 hover:shadow-[0_8px_40px_rgba(0,173,181,0.15)] transition-all duration-300 hover:-translate-y-1"
          >
            <div class="text-xl font-bold mb-2">Team relief & Fresh perspective</div>
            <p class="text-muted mt-2">Single point of contact from start to finish. Robust, maintainable code designed to last and evolve. References available on request.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="about" class="min-h-screen flex items-center justify-center">
      <Content
        title="About"
        subtitle="Who I am"
        tagline=""
        content={`<Fragment>
          <h2 class="text-2xl font-bold mb-2">About me</h2>
          <p>
            After years in several companies in embedded systems, I'm here at your service.<br />
            Easy-going girl with a strong sense of doing great work.<br />
            <br />
            3 fun facts :<br />
          </p>
          <ul class="list-disc pl-6 mt-2 space-y-1">
            <li>I started my career in a big company, but I prefer small teams where I can make a difference.</li>
            <li>First time I became team leader, the next 3 months I handled 10 project managers. I prefer delivering good code now.</li>
            <li>I keep pushing in tech even if I'm almost always the only tech girl in the company. So believe me, I love my job.</li>
          </ul>
        </Fragment>`}
        image={{
          src: profileImage,
          alt: 'Professional headshot - Embedded systems engineer',
          width: 500,
          height: 500,
        }}
      />
    </section>
  </div>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    console.log('ðŸš€ Scroll system loaded');

    // Gestion simple des clics sur menu
    document.addEventListener('click', function (e) {
      const target = e.target as HTMLElement;
      const link = target.closest('a[href^="#"]');

      if (link) {
        e.preventDefault();
        const href = link.getAttribute('href');
        if (!href || href === '#') return;

        const targetId = href.substring(1);
        const targetSection = document.getElementById(targetId);

        if (targetSection) {
          // Scroll simple vers la section
          targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      }
    });

    // S'assurer que le header est blanc au chargement
    const header = document.querySelector('header');
    if (header) {
      header.style.backgroundColor = 'white';
      header.style.backdropFilter = 'blur(10px)';
    }
  });
</script>

<style>
  /* Reset et styles de base */
  * {
    box-sizing: border-box;
  }

  /* Fond du site */
  body {
    background-color: #eeeeee !important;
  }

  [data-scroll-container] {
    background-color: #eeeeee !important;
  }

  /* Full-page sections */
  [data-scroll-section] {
    min-height: 100vh !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    position: relative !important;
    padding: 2rem 0;
  }

  /* Couleurs des titres */
  h1,
  h2,
  h3 {
    color: #222831 !important;
  }

  /* Couleurs des textes de dÃ©tails */
  p,
  li {
    color: #393e46 !important;
  }

  /* Couleurs des highlights avec effet glow */
  .highlight-primary,
  .highlight-secondary,
  .highlight-accent,
  .highlight {
    color: #00adb5 !important;
    text-shadow: 0 0 20px rgba(0, 173, 181, 0.5) !important;
  }

  /* Effet glow pour les boutons primary */
  .btn-primary {
    background-color: #00adb5 !important;
    border-color: #00adb5 !important;
    box-shadow: 0 0 20px rgba(0, 173, 181, 0.5) !important;
    color: white !important;
  }

  .btn-primary:hover {
    background-color: #009aa1 !important;
    border-color: #009aa1 !important;
    box-shadow: 0 0 30px rgba(0, 173, 181, 0.7) !important;
    color: white !important;
  }

  /* Styles spÃ©cifiques pour le bouton Contact dans le header */
  header .btn-primary,
  nav .btn-primary,
  .aw-header .btn-primary {
    background-color: #00adb5 !important;
    border-color: #00adb5 !important;
    box-shadow: 0 0 20px rgba(0, 173, 181, 0.5) !important;
    color: white !important;
  }

  header .btn-primary:hover,
  nav .btn-primary:hover,
  .aw-header .btn-primary:hover {
    background-color: #009aa1 !important;
    border-color: #009aa1 !important;
    box-shadow: 0 0 30px rgba(0, 173, 181, 0.7) !important;
    color: white !important;
  }

  /* Style pour le lien actif dans la navigation */
  .aw-link-active {
    color: #00adb5 !important;
    font-weight: 600;
  }

  /* S'assurer que le header reste visible */
  [data-aw-sticky-header] {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 1000 !important;
    background: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
  }

  /* S'assurer que le scroll fonctionne correctement */
  [data-scroll-container] {
    overflow-y: auto !important;
    overflow-x: hidden !important;
  }

  /* Ã‰lÃ©ments visibles */
  h1[style*='opacity: 1'],
  h2[style*='opacity: 1'],
  h3[style*='opacity: 1'],
  p[style*='opacity: 1'],
  li[style*='opacity: 1'],
  .text-large[style*='opacity: 1'],
  .highlight-primary[style*='opacity: 1'],
  .highlight-secondary[style*='opacity: 1'],
  .highlight-accent[style*='opacity: 1'],
  .highlight[style*='opacity: 1'] {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }

  /* Style pour le lien actif dans la navigation */
  .aw-link-active {
    color: #00adb5 !important;
    font-weight: 600;
  }

  /* AmÃ©lioration du scroll smooth */
  html {
    scroll-behavior: smooth;
  }

  /* Force le header Ã  Ãªtre blanc tout le temps */
  header,
  header.sticky,
  header.relative,
  header.dark,
  header[data-aw-sticky-header] {
    background-color: white !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  }

  /* S'assurer que le texte reste lisible */
  header nav a,
  header nav button {
    color: #222831 !important;
  }

  header nav a:hover,
  header nav button:hover {
    color: #00adb5 !important;
  }

  /* Style pour le lien actif */
  header nav a.aw-link-active {
    color: #00adb5 !important;
    font-weight: 600;
  }

  /* S'assurer que le header est visible au chargement */
  header {
    opacity: 1 !important;
    visibility: visible !important;
  }

  /* Optimisation pour mobile */
  @media (max-width: 768px) {
    [data-scroll-section] {
      padding: 1rem 0;
    }

    /* Ajuster le padding pour mobile */
    [data-scroll-container] {
      padding-top: 60px !important;
    }
  }

  /* Styles pour les cartes de fonctionnalitÃ©s */
  #services .grid > div {
    background: rgba(255, 255, 255, 0.95) !important;
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
  }

  #services .grid > div:hover {
    transform: translateY(-4px) !important;
    box-shadow: 0 8px 40px rgba(0, 173, 181, 0.2) !important;
  }

  /* Style pour la rÃ©fÃ©rence */
  #services .text-primary-500 {
    color: #00adb5 !important;
  }
</style>
